(window.webpackJsonpmoney=window.webpackJsonpmoney||[]).push([[0],{58:function(t,e,n){t.exports=n(64)},64:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(37),o=n.n(i),c=n(8),s=n.n(c),l=n(38),u=n(4),d=n(39),h=n(40),f=n(41),m=n(44),y=n(42),p=n(3),g=n(43),v=n(1),S=["\u5de5\u696d","\u7926\u696d\u53ca\u571f\u77f3\u63a1\u53d6\u696d","\u88fd\u9020\u696d","\u96fb\u529b\u53ca\u71c3\u6c23\u4f9b\u61c9\u696d","\u7528\u6c34\u4f9b\u61c9\u53ca\u6c61\u67d3\u6574\u6cbb\u696d","\u71df\u5efa\u5de5\u7a0b\u696d","\u670d\u52d9\u696d","\u6279\u767c\u53ca\u96f6\u552e\u696d","\u904b\u8f38\u53ca\u5009\u5132\u696d","\u4f4f\u5bbf\u53ca\u9910\u98f2\u696d","\u51fa\u7248\ufe51\u5f71\u97f3\u88fd\u4f5c\ufe51\u50b3\u64ad\u53ca\u8cc7\u901a\u8a0a\u670d\u52d9\u696d","\u91d1\u878d\u53ca\u4fdd\u96aa\u696d","\u4e0d\u52d5\u7522\u696d","\u5c08\u696d\ufe51\u79d1\u5b78\u53ca\u6280\u8853\u670d\u52d9\u696d","\u652f\u63f4\u670d\u52d9\u696d","\u6559\u80b2\u696d(\u4e0d\u542b\u5404\u7d1a\u516c\u79c1\u7acb\u5b78\u6821\u7b49)","\u91ab\u7642\u4fdd\u5065\u696d","\u85dd\u8853\ufe51\u5a1b\u6a02\u53ca\u4f11\u9592\u670d\u52d9\u696d","\u5176\u4ed6\u670d\u52d9\u696d"];function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(n,!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(m.a)(this,Object(y.a)(e).call(this,t))).margin=void 0,n.height=void 0,n.width=void 0,n.originalData=void 0,n.rectWidth=void 0,n.rectIntervalWidth=void 0,n.svgGSelect=void 0,n.yAxisGSelect=void 0,n.xAxisGSelect=void 0,n.rectContainerGSelect=void 0,n.yScale=void 0,n.xScale=void 0,n.initDraw=function(){n.svgGSelect=v.j("#svgSection").attr("width",n.width+n.margin.l+n.margin.r).attr("height",n.height+n.margin.t+n.margin.b).append("g").attr("transform","translate(".concat(n.margin.l,", ").concat(n.margin.t,")")),n.xAxisGSelect=n.svgGSelect.append("g").attr("class","x_container").attr("transform","translate(0,".concat(n.height,")")),n.yAxisGSelect=n.svgGSelect.append("g").attr("class","y_container"),n.rectContainerGSelect=n.svgGSelect.append("g").attr("class","rect_container"),n.setColor()},n.handleMouseOut=function(){n.setState(w({},n.state,{isAlertShow:!1}))},n.handleMouseOver=function(t,e){var a=Object(p.a)(n);n.setState(w({},n.state,{alertText:r.a.createElement("ul",{style:{listStyle:"none",margin:0,padding:10}},r.a.createElement("li",null,t.data["\u7522\u696d"]),a.state.typeObjList.map((function(e){return r.a.createElement("li",{key:e.name},e.name,":",t.data[e.name])}))),isAlertShow:!0}))},n.draw=function(t,e){var a=Object(p.a)(n),r=a.state.industryShowList.length;!function(){var e=t[0].map((function(t){return t.data["\u7522\u696d"]}));a.xScale=v.f().domain(e).range([0,a.width]);var n=v.a(a.xScale);a.xAxisGSelect.transition().call(n),a.xAxisGSelect.selectAll("text").style("text-anchor","end").style("font-size","12px").style("font-weight","900").attr("transform",(function(){return"rotate(-25)"}))}(),function(){a.yScale=v.g().domain([0,e]).range([n.height,0]);var t=v.b(a.yScale);a.yAxisGSelect.transition().call(t)}(),function(){var e=function(t){return(2*t+1)*a.width/(2*r)-a.rectWidth/2},n=function(t){var e=a.state.typeObjList.findIndex((function(e){return e.name===t}));return a.state.typeObjList[e].color},i=a.rectContainerGSelect.selectAll("g").data(t),o=(i.enter().append("g").attr("fill",(function(t){return n(t.key)})).selectAll("rect").data((function(t){return t})).enter().append("rect").on("mouseover",(function(t,e){return a.handleMouseOver(t,e)})).on("mouseout",(function(){return a.handleMouseOut()})).transition().attr("width",a.rectWidth).attr("x",(function(t,n){return e(n)})).attr("y",(function(t){return a.yScale(t[1])})).attr("height",(function(t){return a.yScale(t[0])-a.yScale(t[1])})),i.attr("fill",(function(t){return n(t.key)})).selectAll("rect").data((function(t){return t})));o.transition().attr("x",(function(t,n){return e(n)})).attr("y",(function(t){return a.yScale(t[1])})).attr("height",(function(t){return a.yScale(t[0])-a.yScale(t[1])}));o.exit().remove(),o.enter().append("rect").on("mouseover",(function(t,e){return a.handleMouseOver(t,e)})).on("mouseout",(function(){return a.handleMouseOut()})).transition().attr("width",a.rectWidth).attr("x",(function(t,n){return e(n)})).attr("y",(function(t){return a.yScale(t[1])})).attr("height",(function(t){return a.yScale(t[0])-a.yScale(t[1])}))}()},n.setColor=function(){var t=v.h(v.i),e=n.state.typeObjList.map((function(e){return w({},e,{color:t(e.name)})}));n.setState(w({},n.state,{typeObjList:e}))},n.handleDataUsed=function(){var t=Object(p.a)(n),e=[],a=Object(u.a)(n.state.typeObjList);t.state.industryShowList.forEach((function(n){var a={};a["\u7522\u696d"]=S[n],t.state.typeObjList.forEach((function(e){a[e.name]=t.originalData[n][e.name]})),e.push(a)})),""!==t.state.sortedBy&&function(){var n=t.state.sortedBy;if("sum"!==n){e.sort((function(t,e){return t[n]-e[n]}));var r=a.findIndex((function(t){return t.name===n})),i=w({},a[r]);0!==r&&(a.splice(r,1),a.unshift(i))}else e.sort((function(e,n){var a=function(e){var n=0;return t.state.typeObjList.forEach((function(t){n+=Number(e[t.name])})),n};return a(e)-a(n)}))}(),n.draw(v.k().keys(a.map((function(t){return t.name})))(e),t.state.industryShowList.length>0?v.e(e.map((function(t){return v.l(v.d(t).values())}))):5e4)},n.handleInformationChange=function(t){n.setState(w({},n.state,{sortedBy:t}),(function(){return n.handleDataUsed()}))},n.handleIndustryChange=function(t){if(-1!==n.state.industryShowList.indexOf(t)){var e=n.state.industryShowList.findIndex((function(e){return e===t})),a=Object(u.a)(n.state.industryShowList);return a.splice(e,1),void n.setState(w({},n.state,{industryShowList:Object(u.a)(a)}),(function(){n.handleDataUsed()}))}n.setState(w({},n.state,{industryShowList:[].concat(Object(u.a)(n.state.industryShowList),[t])}),(function(){n.handleDataUsed()}))},n.handleSortedByChange=function(t){n.setState(w({},n.state,{sortedBy:t}),(function(){return n.handleDataUsed()}))},n.rectWidth=20,n.rectIntervalWidth=10,n.margin={t:50,b:150,l:100,r:50},n.height=500,n.width=500,n.originalData=[],n.state={typeObjList:[{name:"\u6bcf\u4eba\u6bcf\u6708\u7d93\u5e38\u6027\u85aa\u8cc7(\u65b0\u81fa\u5e63\u5143)",color:""},{name:"\u6bcf\u4eba\u6bcf\u6708\u975e\u7d93\u5e38\u6027\u85aa\u8cc7(\u65b0\u81fa\u5e63\u5143)",color:""}],industryShowList:["0"],informationShow:"salary",sortedBy:"",isAlertShow:!1,alertText:r.a.createElement("span",null)},n}return Object(g.a)(e,t),Object(f.a)(e,[{key:"componentDidMount",value:function(){var t=this;(function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.c("".concat("/d3stack","/data8.csv"));case 3:t.originalData=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert("\u6293\u8cc7\u6599\u6642\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u91cd\u958b");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}})()().then((function(){t.initDraw(),t.handleSortedByChange("")}))}},{key:"render",value:function(){var t=this,e={left:150,top:50,zIndex:1e5,position:"absolute",backgroundColor:"white",display:this.state.isAlertShow?"block":"none",boxShadow:"0 1px 2px rgba(0,0,0,0.5)",borderRadius:8,fontSize:8,margin:0,padding:0};return r.a.createElement("div",{className:"App"},r.a.createElement("section",null,r.a.createElement("span",{style:{marginRight:15}},"108\u5e74"),r.a.createElement("span",null),r.a.createElement("span",null,r.a.createElement("span",{style:{marginRight:15}},"\u6392\u5217"),this.state.typeObjList.map((function(e){return r.a.createElement("span",{key:e.name,style:{marginRight:15}},r.a.createElement("input",{type:"radio",id:"sortedBy".concat(e.name),checked:t.state.sortedBy===e.name,onChange:function(){return t.handleSortedByChange(e.name)}}),r.a.createElement("label",{htmlFor:"sortedBy".concat(e.name)},e.name))})),r.a.createElement("span",{style:{marginRight:15}},r.a.createElement("input",{type:"radio",id:"sortedBySum",checked:"sum"===this.state.sortedBy,onChange:function(){return t.handleSortedByChange("sum")}}),r.a.createElement("label",{htmlFor:"sortedBySum"},"\u7e3d\u548c")),r.a.createElement("span",null,r.a.createElement("input",{type:"radio",id:"sortedByNone",checked:""===this.state.sortedBy,onChange:function(){return t.handleSortedByChange("")}}),r.a.createElement("label",{htmlFor:"sortedByNone"},"\u7121\u6392\u5217")))),r.a.createElement("section",{style:{display:"flex"}},r.a.createElement("aside",null,r.a.createElement("div",null,"\u7522\u696d"),S.map((function(e,n){return r.a.createElement("div",{key:n},r.a.createElement("input",{type:"checkbox",checked:-1!==t.state.industryShowList.indexOf(String(n)),value:n,id:"industry".concat(n),onChange:function(e){return t.handleIndustryChange(e.target.value)}}),r.a.createElement("label",{htmlFor:"industry".concat(n)},e))}))),r.a.createElement("main",{style:{position:"relative"}},r.a.createElement("section",{style:e},this.state.alertText),r.a.createElement("svg",{id:"svgSection"}))))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[58,1,2]]]);
//# sourceMappingURL=main.11d0cd93.chunk.js.map